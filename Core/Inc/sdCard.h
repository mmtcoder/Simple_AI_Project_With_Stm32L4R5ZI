/*
 * sdCard.h
 *
 *  Created on: Dec 12, 2021
 *      Author: H3RK3S
 */

#include "main.h"
#include "ImageProccess.h"

#ifndef INC_SDCARD_H_
#define INC_SDCARD_H_

#define PROCESS_SUCCESFULL 1
#define PROCESS_UNSUCCESFULL  0

#define CAMERA_PHOTO_ENABLE		1
#define CAMERA_PHOTO_DISABLE	0


#define CAMERA_WRITE_ENABLE		4
#define CAMERA_READ_ENABLE		3
#define CAMERA_IDLE_STATE		5
#if RES_120x160
//QQVGA Format 120 x 160

 static uint8_t bmp_header[66]={
		 //Header 14 Bytes
		  0x42, 0x4D, //Signature 2 bytes
		  0x36, 0xE1, 0x00, 0x00, // File Size 4 byte
		  0x00, 0x00, 0x00, 0x00, //reserved 4 bytes
		  0x42, 0x00, 0x00, 0x00, //Data offset 4 bytes
		  // Info Header 40 bytes
		  0x28, 0x00, 0x00, 0x00, //Size of Header = 40 bits( 4 bytes )
		  0xA0, 0x00, 0x00, 0x00, //Width 4 bytes
		  0x78, 0x00, 0x00, 0x00, // Height 4 bytes
		  0x01, 0x00,// Planes 2 bytes
		  0x10, 0x00,//Bits Per Pixel 2 bytes
		  0x03, 0x00, 0x00, 0x00, // Compression 4 bytes
		  0x00, 0x96, 0x00, 0x00, // Image Size 4 bytes
		  0x00, 0x00, 0x00, 0x00, // XpixeslPerMeter 4 bytes
		  0x00, 0x00, 0x00, 0x00, // YpixelsPerMeter + bytes
		  0x00, 0x00, 0x00, 0x00, // Color USed 4 bytes
		  0x00, 0x00, 0x00, 0x00, // Important Colors + bytes
		  /******** Color Table 4 x NumOfcolors *************/
		  0x00, 0xF8, 0x00, 0x00, 0xE0, 0x07, 0x00, 0x00, 0x1F, 0x00,
		  0x00, 0x00
};
/*
static uint8_t bmp_header[66]={
   0x42, 0x4D, 0x36, 0xE1, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x42, 0x00, 0x00, 0x00,
   0x28, 0x00,
  0x00, 0x00, 0xA0, 0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x01, 0x00, 0x10, 0x00, 0x03, 0x00,
  0x00, 0x00, 0x00, 0x00, 0xE1, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0xE0, 0x07, 0x00, 0x00, 0x1F, 0x00,
  0x00, 0x00
};*/

#else
//QVGA Format 240 x 320

 static uint8_t bmp_header[66]={
		 //Header 14 Bytes
  0x42, 0x4D, //Signature 2 bytes
  0x42, 0x58, 0x02, 0x00, // File Size 4 byte
  0x00, 0x00, 0x00, 0x00, //reserved 4 bytes
  0x42, 0x00, 0x00, 0x00, //Data offset 4 bytes
  // Info Header 40 bytes
  0x28, 0x00, 0x00, 0x00, //Size 4 bytes
  0x40, 0x01, 0x00, 0x00, //Width 4 bytes
  0xF0, 0x00, 0x00, 0x00, // Height 4 bytes
  0x01, 0x00,// Planes 2 bytes
  0x10, 0x00,//Bits Per Pixel
  0x03, 0x00, 0x00, 0x00, // Compression 4 bytes
  0x00, 0x58, 0x02, 0x00, // Image Size 4 bytes
  0x00, 0x00, 0x00, 0x00, // XpixeslPerMeter 4 bytes
  0x00, 0x00, 0x00, 0x00, // YpixelsPerMeter + bytes
  0x00, 0x00, 0x00, 0x00, // Color USed 4 bytes
  0x00, 0x00, 0x00, 0x00, // Important Colors + bytes
  /******** Color Table 4 x NumOfcolors *************/
  0x00, 0xF8, 0x00, 0x00, 0xE0, 0x07, 0x00, 0x00, 0x1F, 0x00,
  0x00, 0x00
};

#endif



void writeBitMaptoFile(uint8_t * imageBuffer, uint32_t imageSize);

void send_uart (char *string);

void mountSDcard();

void successOrUnsuccesLed(uint8_t status);

void bufClear (void);

uint8_t * readImageFromFile();

uint32_t bufSize(char * buf);


#endif /* INC_SDCARD_H_ */
